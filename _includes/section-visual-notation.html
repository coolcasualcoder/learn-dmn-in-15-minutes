<div id="section-visual-notation" class="learn-section hidden">
  <div class="learn-home-content editor">

    <div class="tabs">
      <i class="fa fa-search"></i> 
      <ul>
        <li class="active">Editor</li>
        <li>Documentation</li>
        <li>Data Types</li>
      </ul>
    </div>

    <div class="properties-panel">
      <i class="fa fa-map"></i>
      <i class="fa fa-edit"></i>
      <i class="fa fa-eye"></i>
    </div>

    <ul class="shape-palette">
      <li>
        <img draggable="true" data-svg-name="svg-text-annotation" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGlkPSJJY29uIiBjbGFzcz0ic3QwIiBkPSJNNDAsMTIwaDgwVjgwSDQwQzE3LjksODAsMCw5Ny45LDAsMTIwdjE4MGMwLDIyLjEsMTcuOSw0MCw0MCw0MGg4MHYtNDBINDBWMTIweiBNNDIwLDIyMGgtMjB2LTYwCgloLTQwdjQwaC0yMHYyMGgtMjB2LTYwaC00MHY2MGgtMjB2LTQwaC0zOS43djIwSDIwMHYtMjBoLTQwdjIwaC0yMHYyMGgtMjB2LTYwSDgwdjgwaDYwdjIwaDQwdi0yMGgyNDBWMjIweiIvPgo8L3N2Zz4K" />
      </li>
      <li>
        <img draggable="true" data-svg-name="svg-business-knowledge-model" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGlkPSJJY29uXzFfIiBjbGFzcz0ic3QwIiBkPSJNMzgwLDEyMHYxNDMuNEwzNDMuNCwzMDBINDBWMTU2LjZMNzYuNiwxMjBIMzgwIE00MDAsODBINjguM2MtNS4zLDAtMTAuNCwyLjEtMTQuMSw1LjlMNS45LDEzNC4xCglDMi4xLDEzNy45LDAsMTQzLDAsMTQ4LjNWMzIwYzAsMTEsOSwyMCwyMCwyMGgzMzEuN2M1LjMsMCwxMC40LTIuMSwxNC4xLTUuOWw0OC4zLTQ4LjNjMy44LTMuOCw1LjktOC44LDUuOS0xNC4xVjEwMAoJQzQyMCw4OSw0MTEsODAsNDAwLDgwTDQwMCw4MHoiLz4KPC9zdmc+Cg==" />
      </li>
      <li>
        <img draggable="true" data-svg-name="svg-input-data" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGlkPSJJY29uIiBjbGFzcz0ic3QwIiBkPSJNMjkyLDEyMGM0OC41LDAsODgsMzkuNSw4OCw4OHY0YzAsNDguNS0zOS41LDg4LTg4LDg4SDEyOGMtNDguNSwwLTg4LTM5LjUtODgtODh2LTQKCWMwLTQ4LjUsMzkuNS04OCw4OC04OEgyOTIgTTI5Miw4MEgxMjhDNTcuMyw4MCwwLDEzNy4zLDAsMjA4djRjMCw3MC43LDU3LjMsMTI4LDEyOCwxMjhoMTY0YzcwLjcsMCwxMjgtNTcuMywxMjgtMTI4di00CglDNDIwLDEzNy4zLDM2Mi43LDgwLDI5Miw4MEwyOTIsODB6Ii8+Cjwvc3ZnPgo=" />
      </li>
      <li>
        <img draggable="true" data-svg-name="svg-decision-service" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTAsODBINzBjLTM4LjcsMC03MCwzMS4zLTcwLDcwdjEyMGMwLDM4LjcsMzEuMyw3MCw3MCw3MGgyODBjMzguNywwLDcwLTMxLjMsNzAtNzBWMTUwCglDNDIwLDExMS4zLDM4OC43LDgwLDM1MCw4MHogTTc4LDExOS45aDI2NGMyMSwwLDM4LDE3LDM4LDM4VjIwMEg0MHYtNDIuMUM0MCwxMzYuOSw1NywxMTkuOSw3OCwxMTkuOXogTTM0MiwyOTkuOUg3OAoJYy0yMSwwLTM4LTE3LTM4LTM4VjIyMGgzNDB2NDEuOUMzODAsMjgyLjksMzYzLDI5OS45LDM0MiwyOTkuOXoiLz4KPC9zdmc+Cg==" />
      </li>
      <li>
        <img draggable="true" data-svg-name="svg-knowledge-source" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGlkPSJJY29uIiBjbGFzcz0ic3QwIiBkPSJNMzgwLjMsMTIwLjF2MTA5LjRjLTI0LjYtOS41LTQ5LjEtMTQuMy03My0xNC4zYy0yMiwwLTQzLjIsNC4xLTYzLjMsMTIuMmMtMjIuNCw5LjEtNDMuMiwyMy4yLTYyLDQyCgljLTIwLjgsMjAuOC00My4yLDMwLjgtNjguNywzMC44Yy0yOS42LDAtNTcuMS0xMy43LTczLTIzLjRWMTIwLjFIMzgwLjMgTTQwMC4zLDgwLjFoLTM4MGMtMTEsMC0yMCw5LTIwLDIwdjE5NS4yCgljMCwxLjUsMC43LDMsMS45LDMuOWM5LjgsNy42LDU2LDQxLDExMS4xLDQxYzMxLjEsMCw2NS4xLTEwLjYsOTctNDIuNmMzMS45LTMxLjksNjUuOS00Mi42LDk3LTQyLjZjNDcuNiwwLDg4LjYsMjQuOSwxMDUuMSwzNi42CgljMC45LDAuNiwxLjksMC45LDIuOSwwLjljMi42LDAsNS0yLjEsNS01VjEwMC4xQzQyMC4zLDg5LDQxMS4zLDgwLjEsNDAwLjMsODAuMUw0MDAuMyw4MC4xeiIvPgo8L3N2Zz4K" />
      </li>
      <li>
        <img draggable="true" data-svg-name="svg-decision" class="icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0MjAgNDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MjAgNDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzRENTI1ODt9Cjwvc3R5bGU+CjxwYXRoIGlkPSJJY29uIiBjbGFzcz0ic3QwIiBkPSJNMzk1LDgwSDI1QzExLjIsODAsMCw5MS4yLDAsMTA1djIxMGMwLDEzLjgsMTEuMiwyNSwyNSwyNWgzNzBjMTMuOCwwLDI1LTExLjIsMjUtMjVWMTA1CglDNDIwLDkxLjIsNDA4LjgsODAsMzk1LDgweiBNNDAsMzAwVjEyMGgzNDB2MTgwSDQweiIvPgo8L3N2Zz4K" />
      </li>
    </ul>

    <div class="svgs">

      <div id="svg-decision" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg">
          <g>
            <rect class="decision" stroke-width="2" x="1" y="1" width="100" height="50" fill="white" stroke="black"></rect>
            <text x="23" y="30" font-family="arial" font-size="14" fill="black">Decision</text>
          </g>
        </svg>
      </div>
      <div id="svg-business-knowledge-model" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg">
          <g>
            <path class="businessKnowledgeModel" d="M16.5,1.5h92v42l-15,15h-92v-42L16.5,1.5z" stroke-width="2" width="100" height="50" fill="white" stroke="black"/>
            <text x="30" y="20" font-family="arial" font-size="14" fill="black">Business</text>
            <text x="22" y="34" font-family="arial" font-size="14" fill="black">Knowledge</text>
            <text x="36" y="48" font-family="arial" font-size="14" fill="black">Model</text>
          </g>
        </svg>
      </div>
      <div id="svg-input-data" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg">
          <g>
            <path class="inputData" d="M1.5,30C1.5,14.3,14.3,1.5,30,1.5h50c15.7,0,28.5,12.8,28.5,28.5S95.7,58.5,80,58.5H30C14.3,58.5,1.5,45.7,1.5,30z" stroke-width="2" fill="white" stroke="black"/>
            <text x="22" y="34  " font-family="arial" font-size="14" fill="black">Input Data</text>
          </g>
        </svg>
      </div>
      <div id="svg-knowledge-source" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg">
          <g>
            <path class="knowledgeSource" d="M1.5,1.5h107V51C90.7,41,72.8,41,55,51S19.3,61,1.5,51V1.5z"  stroke-width="2" fill="white" stroke="black"/>
            <text x="19" y="22" font-family="arial" font-size="14" fill="black">Knowledge</text>
            <text x="32" y="37" font-family="arial" font-size="14" fill="black">Source</text>
          </g>
        </svg>
      </div>
      <div id="svg-text-annotation" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg">
          <g>
            <path id="shape1" class="text_annotation_main" d="M7.4,58.6H2.6V1.4h4.8" stroke-width="2" fill="white" stroke="black"/>
            <text x="22" y="35.5" font-family="arial" font-size="14" fill="black">Text Annotation</text>
          </g>
        </svg>
      </div>
      <div id="svg-decision-service" class="svg-canvas-element hidden">
        <svg xmlns="http://www.w3.org/2000/svg" x="1" y="1" width="200" height="200" viewBox="0 0 200 200" troke-width="1" fill="white" stroke-width="2">
          <g>
            <rect class="decisionService" x="0" y="0" rx="40" ry="40" width="200" height="200" stroke-width="1" fill="white" stroke="black"/>
            <line x1="0" y1="50" x2="200" y2="50" stroke-width="1" stroke="black" />
            <text x="48" y="30" font-family="arial" font-size="14" fill="black">Decision Service</text>
          </g>
        </svg>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
  (function() {

    // ===== Init =====

    window.LEARN_DMN = window.LEARN_DMN || {};
    var LEARN_DMN = window.LEARN_DMN;
    LEARN_DMN.ON_LOAD_SECTION = LEARN_DMN.ON_LOAD_SECTION || {};
    
    LEARN_DMN.ON_LOAD_SECTION['section-visual-notation'] = function() {
      LEARN_DMN.Lights.turnLightsOff();

      function showTryItNowMessage () {

        var title = 'Let\'s det it started!';
        var content = '<p>Let\'s understand the main components of our model.</p>' +
                      '<p>Try to drag each element in the canvas, to understand each of them.</p>';

        LEARN_DMN.Message.showMessage({
          title: title,
          content: content,
          width: 400,
          height: 300,
          actionName: 'Try it now!',
          action: function() {
            LEARN_DMN.Lights.turnLightsOn();
            showPalleteMessage();
          }
        });
      }

      function showPalleteMessage() {

        var title = '← Here\'s the component pallete';
        var content = '<p>Start dragging elements into the canvas!</p>';

        LEARN_DMN.Message.showMessage({
          title: title,
          content: content,
          width: 400,
          height: 160,
          top: 120,
          left: 60
        });
      }

      showTryItNowMessage();
    }

    // ===== Pallete =====

    var nodeMessages = {
      'svg-text-annotation' : {
        title: 'Text Annotation',
        content: 'A Text Annotation consists of a square bracket followed by modeler-entered explanatory text or comment.'
      },
      'svg-business-knowledge-model' : {
        title: 'Business knowledge model',
        content: 'A business knowledge model denotes a function encapsulating business knowledge, e.g., as business rules, a decision table, or an analytic model.'
      },
      'svg-input-data' : {
        title: 'Input data',
        content: 'An input data element denotes information used as an input by one or more decisions. When enclosed within a knowledge model, it denotes the parameters to the knowledge model.'
      },
      'svg-decision-service' : {
        title: 'Decision Service',
        content: 'A decision service may enclose a set of reusable decisions (not shown in the element to the right) that can be invoked internally by another decision or externally, e.g., by a BPMN process.'
      },
      'svg-knowledge-source' : {
        title: 'Knowledge source',
        content: 'A knowledge source denotes an authority for a business knowledge model or decision.'
      },
      'svg-decision' : {
        title: 'Decision',
        content: 'A decision denotes the act of determining an output from a number of inputs, using decision logic which may reference one or more business knowledge models'
      }
    };

    var palleteItems = document.querySelectorAll('.shape-palette li img');
    var editorCanvas = document.querySelector('.editor');

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData('text', ev.target.getAttribute('data-svg-name'));
    }

    function drop(ev) {
      ev.preventDefault();

      var dataSVGName = ev.dataTransfer.getData('text');
      var element = document.querySelector('#' + dataSVGName);
      var button = document.querySelector('[data-svg-name="' + dataSVGName + '"]');
      var numberOfPalleteItems = 6;
      var numberOfDraggedElements = document.querySelectorAll('.shape-palette .done').length + 1;
      var isFinished = numberOfPalleteItems === numberOfDraggedElements;

      function getSuffix() {
        if (isFinished) {
          return '<b><p>Congratulations! You\'ve learned about all components!</p></b>';
        } else {
          return '<b><p>You\'ve dragged ' + numberOfDraggedElements + ' of ' + numberOfPalleteItems + '!</p><p>Keep dragging! :-)</p></b>';
        }
      }

      function nextSection() {
        LEARN_DMN.Message.hideMessage();
        LEARN_DMN.markAsCompleted('section-visual-notation');
      }


      if (element.classList.contains('hidden')) {
        element.classList.remove('hidden');
        element.style.top = ev.y + 'px';
        element.style.left = ev.x + 'px';

        var nodeSize = dataSVGName === 'svg-decision-service' ? 200 : 100;

        LEARN_DMN.Message.showMessage({
          title: nodeMessages[dataSVGName].title,
          content: '<p>' + nodeMessages[dataSVGName].content + '</p>' + getSuffix(),
          width: 400,
          height: 'auto',
          top: ev.y,
          left: ev.x + nodeSize + 20,
          actionName: isFinished ? 'Next section' : null,
          action: isFinished ? nextSection : null
        });

        button.parentNode.classList.add('done');
      }
    }

    editorCanvas.ondragover = allowDrop;
    editorCanvas.ondrop = drop;

    palleteItems.forEach(function(item) {
      item.ondragstart = drag;
    });

  }());
</script>
